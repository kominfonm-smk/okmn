<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot AI SMK Infokom Bogor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }
        
        .header {
            background: linear-gradient(90deg, #1a237e 0%, #3949ab 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 26px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .header p {
            font-size: 15px;
            opacity: 0.9;
        }
        
        .api-status {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #4CAF50;
            animation: pulse 2s infinite;
        }
        
        .status-dot.offline {
            background-color: #f44336;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .chat-container {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: #f9f9f9;
        }
        
        .message {
            display: flex;
            max-width: 80%;
            margin-bottom: 5px;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .bot-message {
            align-self: flex-start;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .user-avatar {
            background-color: #3949ab;
            margin-left: 12px;
        }
        
        .bot-avatar {
            background-color: #ff5722;
            margin-right: 12px;
        }
        
        .message-content {
            padding: 15px;
            border-radius: 18px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            line-height: 1.5;
        }
        
        .user-message .message-content {
            background-color: #3949ab;
            color: white;
            border-top-right-radius: 5px;
        }
        
        .bot-message .message-content {
            background-color: white;
            color: #333;
            border-top-left-radius: 5px;
        }
        
        .message-content p {
            margin-bottom: 5px;
        }
        
        .message-content ul, .message-content ol {
            padding-left: 20px;
            margin-bottom: 10px;
        }
        
        .input-container {
            padding: 20px 25px;
            background-color: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 15px;
        }
        
        #user-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 16px;
            transition: border 0.3s;
            outline: none;
        }
        
        #user-input:focus {
            border-color: #3949ab;
        }
        
        #send-button {
            background-color: #3949ab;
            color: white;
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            cursor: pointer;
            font-size: 20px;
            transition: background-color 0.3s, transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #send-button:hover {
            background-color: #283593;
            transform: scale(1.05);
        }
        
        #send-button:active {
            transform: scale(0.98);
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background-color: white;
            border-radius: 18px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            width: fit-content;
            margin-top: 5px;
        }
        
        .typing-indicator span {
            height: 10px;
            width: 10px;
            background-color: #999;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            animation: typing 1.5s infinite ease-in-out;
        }
        
        .typing-indicator span:nth-child(1) {
            animation-delay: 0s;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
            margin-right: 0;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-8px);
            }
        }
        
        .info-box {
            background-color: #e8f4fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .warning-box {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .suggestion-btn {
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .suggestion-btn:hover {
            background-color: #e0e0e0;
        }
        
        .footer {
            text-align: center;
            padding: 15px;
            font-size: 13px;
            color: #777;
            background-color: #f9f9f9;
            border-top: 1px solid #eee;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                height: 95vh;
            }
            
            .header {
                padding: 20px;
            }
            
            .chat-container {
                padding: 15px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .input-container {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 22px;
            }
            
            .message-content {
                padding: 12px;
                font-size: 15px;
            }
            
            .avatar {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            #user-input {
                padding: 12px 15px;
            }
            
            #send-button {
                width: 50px;
                height: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="api-status">
                <span class="status-dot" id="api-status-dot"></span>
                <span id="api-status-text">Menggunakan AI</span>
            </div>
            <h1><i class="fas fa-robot"></i> Chatbot AI SMK Infokom</h1>
            <p>Chatbot informasi tentang SMK Infokom Bogor. Tanyakan tentang jurusan, kegiatan, pendaftaran, dan lainnya.</p>
        </div>
        
        <div class="chat-container" id="chat-container">
            <!-- Pesan pembuka dari bot -->
            <div class="message bot-message">
                <div class="avatar bot-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <p>Halo! Saya adalah chatbot AI SMK Infokom Bogor. Saya siap membantu Anda dengan informasi tentang sekolah kami.</p>
                    <p>Anda bisa menanyakan tentang:</p>
                    <ul>
                        <li>Program jurusan yang tersedia</li>
                        <li>Proses pendaftaran siswa baru</li>
                        <li>Kegiatan ekstrakurikuler</li>
                        <li>Fasilitas sekolah</li>
                        <li>Prestasi sekolah</li>
                        <li>Dan informasi lainnya tentang SMK Infokom</li>
                    </ul>
                    <p>Apa yang ingin Anda ketahui?</p>
                    
                    <div class="suggestions">
                        <button class="suggestion-btn" data-question="Apa saja jurusan di SMK Infokom?">Jurusan di SMK Infokom</button>
                        <button class="suggestion-btn" data-question="Bagaimana cara mendaftar?">Cara Pendaftaran</button>
                        <button class="suggestion-btn" data-question="Apa keunggulan SMK Infokom?">Keunggulan Sekolah</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Ketik pertanyaan Anda tentang SMK Infokom..." autocomplete="off">
            <button id="send-button">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
        
        <div class="footer">
            <p>Chatbot AI SMK Infokom | <span id="mode-indicator">Mode: AI Online</span> | Data informasi dapat berubah</p>
        </div>
    </div>

    <script>
        // Konfigurasi API
        const API_KEY = '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';
        const API_URL = 'https://api.groq.com/openai/v1/chat/completions';
        
        // Status API
        let apiOnline = true;
        let useLocalMode = false;
        
        // Elemen DOM
        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const apiStatusDot = document.getElementById('api-status-dot');
        const apiStatusText = document.getElementById('api-status-text');
        const modeIndicator = document.getElementById('mode-indicator');
        
        // Database pengetahuan lokal tentang SMK Infokom
        const localKnowledgeBase = {
            "jurusan": {
                "keywords": ["jurusan", "program studi", "konsentrasi", "rpl", "tkj", "multimedia"],
                "response": `
                    <p><strong>SMK Infokom Bogor memiliki 3 jurusan unggulan:</strong></p>
                    <ol>
                        <li><strong>Rekayasa Perangkat Lunak (RPL)</strong> - Fokus pada pemrograman, pengembangan aplikasi web dan mobile, database, dan software engineering.</li>
                        <li><strong>Teknik Komputer dan Jaringan (TKJ)</strong> - Fokus pada jaringan komputer, administrasi server, keamanan jaringan, dan maintenance hardware.</li>
                        <li><strong>Multimedia (MM)</strong> - Fokus pada desain grafis, animasi, produksi video, fotografi digital, dan konten kreatif.</li>
                    </ol>
                    <p>Setiap jurusan dilengkapi dengan laboratorium khusus dan diajar oleh pengajar yang kompeten di bidangnya.</p>
                `
            },
            "pendaftaran": {
                "keywords": ["daftar", "pendaftaran", "cara masuk", "syarat", "registrasi", "penerimaan"],
                "response": `
                    <p><strong>Proses Pendaftaran SMK Infokom Bogor:</strong></p>
                    <ol>
                        <li><strong>Pendaftaran Online</strong> - melalui website resmi: www.smkinfokom-bogor.sch.id</li>
                        <li><strong>Persyaratan:</strong>
                            <ul>
                                <li>Fotokopi ijazah SMP/sederajat</li>
                                <li>Fotokopi raport kelas 7-9</li>
                                <li>Akta kelahiran dan KK</li>
                                <li>Pas foto 3x4 (3 lembar)</li>
                            </ul>
                        </li>
                        <li><strong>Tes Seleksi:</strong> Tes akademik (Matematika, Bahasa Inggris, IPA) dan tes bakat minat</li>
                        <li><strong>Pengumuman:</strong> Hasil seleksi diumumkan melalui website sekolah</li>
                        <li><strong>Daftar Ulang:</strong> Bagi yang diterima melakukan daftar ulang dengan melengkapi administrasi</li>
                    </ol>
                    <p><strong>Periode pendaftaran:</strong> Januari - Mei setiap tahunnya.</p>
                `
            },
            "fasilitas": {
                "keywords": ["fasilitas", "laboratorium", "ruang", "studio", "perpustakaan", "lapangan"],
                "response": `
                    <p><strong>Fasilitas SMK Infokom Bogor:</strong></p>
                    <ul>
                        <li><strong>Laboratorium Komputer</strong> - 6 ruang dengan spesifikasi tinggi</li>
                        <li><strong>Laboratorium Jaringan</strong> - dilengkapi peralatan Cisco</li>
                        <li><strong>Studio Multimedia</strong> - lengkap dengan kamera, lighting, green screen</li>
                        <li><strong>Perpustakaan Digital</strong> - dengan akses online dan koleksi buku IT</li>
                        <li><strong>Lapangan Olahraga</strong> - futsal, basket, voli</li>
                        <li><strong>Ruang Praktek</strong> - untuk setiap jurusan</li>
                        <li><strong>Hotspot Area</strong> - WiFi di seluruh lingkungan sekolah</li>
                        <li><strong>Masjid dan Ruang Ibadah</strong></li>
                        <li><strong>Kantin Sehat</strong> dengan WiFi</li>
                        <li><strong>Auditorium</strong> kapasitas 300 orang</li>
                    </ul>
                `
            },
            "ekstrakurikuler": {
                "keywords": ["ekstra", "ekskul", "kegiatan", "pramuka", "olahraga", "club"],
                "response": `
                    <p><strong>Kegiatan Ekstrakurikuler di SMK Infokom:</strong></p>
                    <ul>
                        <li><strong>Wajib:</strong> Pramuka (untuk kelas X)</li>
                        <li><strong>Olahraga:</strong> Futsal, Basket, Voli, Badminton</li>
                        <li><strong>Seni & Budaya:</strong> Band, Teater, Tari</li>
                        <li><strong>Keagamaan:</strong> Rohani Islam (Rohis), Rohani Kristen (Rohkris)</li>
                        <li><strong>Kepemimpinan:</strong> Paskibra, Palang Merah Remaja (PMR)</li>
                        <li><strong>IT & Teknologi:</strong> Programming Club, Network Club, Design Club</li>
                        <li><strong>Bahasa:</strong> English Club, Japanese Club</li>
                    </ul>
                `
            },
            "alamat": {
                "keywords": ["alamat", "lokasi", "dimana", "tempat", "kontak", "telepon"],
                "response": `
                    <p><strong>Alamat dan Kontak SMK Infokom Bogor:</strong></p>
                    <ul>
                        <li><strong>Alamat:</strong> Jalan Raya Tajur No. 33, Bogor, Jawa Barat 16134</li>
                        <li><strong>Telepon:</strong> (0251) 123456</li>
                        <li><strong>Email:</strong> info@smkinfokom-bogor.sch.id</li>
                        <li><strong>Website:</strong> www.smkinfokom-bogor.sch.id</li>
                        <li><strong>Instagram:</strong> @smkinfokombogor</li>
                        <li><strong>Facebook:</strong> SMK Infokom Bogor Official</li>
                    </ul>
                    <p>Sekolah mudah diakses dari pusat kota Bogor dan dekat dengan terminal Tajur.</p>
                `
            },
            "keunggulan": {
                "keywords": ["keunggulan", "kelebihan", "keistimewaan", "unggul", "prestasi", "akreditasi"],
                "response": `
                    <p><strong>Keunggulan SMK Infokom Bogor:</strong></p>
                    <ol>
                        <li><strong>Akreditasi A (Unggul)</strong> dari BAN-SM</li>
                        <li><strong>Sertifikasi ISO 9001:2015</strong> untuk manajemen mutu</li>
                        <li><strong>Kerja Sama Industri</strong> dengan perusahaan IT ternama</li>
                        <li><strong>Fasilitas Lengkap</strong> dengan teknologi terkini</li>
                        <li><strong>Pengajar Berkualitas</strong> dengan sertifikasi kompetensi</li>
                        <li><strong>Tingkat Penyerapan Lulusan Tinggi</strong> (85% langsung kerja)</li>
                        <li><strong>Prestasi Kompetisi</strong> tingkat regional dan nasional</li>
                        <li><strong>Program Magang</strong> di perusahaan mitra</li>
                    </ol>
                `
            },
            "default": {
                "response": `
                    <p>Saya memahami pertanyaan Anda, namun informasi spesifik tersebut belum tersedia dalam database lokal saya.</p>
                    <div class="warning-box">
                        <p><strong>Mode Offline Aktif</strong> - Saat ini saya menggunakan database lokal karena koneksi AI sedang terganggu.</p>
                        <p>Anda dapat menanyakan tentang:</p>
                        <ul>
                            <li>Jurusan yang tersedia</li>
                            <li>Proses pendaftaran</li>
                            <li>Fasilitas sekolah</li>
                            <li>Kegiatan ekstrakurikuler</li>
                            <li>Alamat dan kontak</li>
                            <li>Keunggulan sekolah</li>
                        </ul>
                    </div>
                `
            }
        };
        
        // Fungsi untuk mencari jawaban dari database lokal
        function findLocalAnswer(question) {
            const lowercaseQuestion = question.toLowerCase();
            
            for (const [topic, data] of Object.entries(localKnowledgeBase)) {
                if (topic === "default") continue;
                
                for (const keyword of data.keywords) {
                    if (lowercaseQuestion.includes(keyword)) {
                        return {
                            topic: topic,
                            response: data.response,
                            found: true
                        };
                    }
                }
            }
            
            return {
                topic: "default",
                response: localKnowledgeBase.default.response,
                found: false
            };
        }
        
        // Update status API
        function updateApiStatus(online) {
            apiOnline = online;
            useLocalMode = !online;
            
            if (online) {
                apiStatusDot.className = "status-dot";
                apiStatusText.textContent = "AI Online";
                modeIndicator.textContent = "Mode: AI Online";
            } else {
                apiStatusDot.className = "status-dot offline";
                apiStatusText.textContent = "Mode Lokal";
                modeIndicator.textContent = "Mode: Database Lokal";
            }
        }
        
        // Test koneksi API
        async function testApiConnection() {
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'mixtral-8x7b-32768',
                        messages: [{ role: 'user', content: 'test' }],
                        max_tokens: 5
                    })
                });
                
                return response.ok;
            } catch (error) {
                console.log("API Connection Test Failed:", error.message);
                return false;
            }
        }
        
        // Menambahkan pesan ke chat
        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = `avatar ${isUser ? 'user-avatar' : 'bot-avatar'}`;
            avatarDiv.innerHTML = isUser ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            // Jika konten berupa string HTML, gunakan innerHTML
            if (typeof content === 'string' && content.includes('<')) {
                contentDiv.innerHTML = content;
            } else {
                contentDiv.textContent = content;
            }
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(contentDiv);
            chatContainer.appendChild(messageDiv);
            
            // Scroll ke bawah
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 100);
            
            return contentDiv;
        }
        
        // Menampilkan indikator typing
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typing-indicator';
            
            typingDiv.innerHTML = `
                <span></span>
                <span></span>
                <span></span>
                <span style="margin-left: 10px; font-size: 12px; color: #666;">
                    ${apiOnline ? 'AI sedang berpikir...' : 'Mencari di database...'}
                </span>
            `;
            
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            return typingDiv;
        }
        
        // Menghapus indikator typing
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        // Mengirim pesan ke API Groq
        async function sendMessageToAPI(message) {
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'mixtral-8x7b-32768',
                        messages: [
                            {
                                role: 'system',
                                content: `Anda adalah chatbot informasi untuk SMK Infokom Bogor. Berikan jawaban yang informatif dan ramah tentang sekolah ini. Jawab dalam Bahasa Indonesia. Jika tidak tahu jawabannya, katakan dengan jujur.`
                            },
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        temperature: 0.7,
                        max_tokens: 800,
                        stream: false
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                return { success: true, message: data.choices[0].message.content };
                
            } catch (error) {
                console.error('API Error:', error);
                return { success: false, message: `Gagal menghubungi AI. Beralih ke mode lokal...` };
            }
        }
        
        // Memproses pesan pengguna
        async function processUserMessage() {
            const message = userInput.value.trim();
            
            if (!message) return;
            
            // Tambahkan pesan pengguna ke chat
            addMessage(message, true);
            
            // Kosongkan input
            userInput.value = '';
            
            // Tampilkan indikator typing
            showTypingIndicator();
            
            let botResponse;
            
            if (apiOnline && !useLocalMode) {
                // Coba menggunakan API terlebih dahulu
                const apiResult = await sendMessageToAPI(message);
                
                if (apiResult.success) {
                    botResponse = apiResult.message;
                } else {
                    // Jika API gagal, beralih ke mode lokal
                    updateApiStatus(false);
                    const localResult = findLocalAnswer(message);
                    botResponse = `
                        <div class="warning-box">
                            <p><strong>⚠️ AI sedang offline</strong> - Menggunakan database lokal</p>
                        </div>
                        ${localResult.response}
                    `;
                }
            } else {
                // Gunakan database lokal
                await new Promise(resolve => setTimeout(resolve, 800)); // Simulasi delay
                const localResult = findLocalAnswer(message);
                botResponse = localResult.response;
            }
            
            // Hapus indikator typing
            removeTypingIndicator();
            
            // Tambahkan respons bot ke chat
            const responseElement = addMessage(botResponse, false);
            
            // Tambahkan tombol saran
            addSuggestionButtons(responseElement);
        }
        
        // Tambahkan tombol saran
        function addSuggestionButtons(responseElement) {
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.className = 'suggestions';
            suggestionsDiv.innerHTML = `
                <button class="suggestion-btn" data-question="Apa saja jurusan di SMK Infokom?">Jurusan</button>
                <button class="suggestion-btn" data-question="Bagaimana cara mendaftar?">Pendaftaran</button>
                <button class="suggestion-btn" data-question="Apa fasilitas di SMK Infokom?">Fasilitas</button>
                <button class="suggestion-btn" data-question="Dimana alamat SMK Infokom?">Alamat</button>
            `;
            responseElement.appendChild(suggestionsDiv);
            
            // Tambahkan event listener untuk tombol saran baru
            document.querySelectorAll('.suggestion-btn').forEach(button => {
                button.addEventListener('click', function() {
                    userInput.value = this.getAttribute('data-question');
                    processUserMessage();
                });
            });
        }
        
        // Event listener untuk tombol kirim
        sendButton.addEventListener('click', processUserMessage);
        
        // Event listener untuk tombol enter
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                processUserMessage();
            }
        });
        
        // Event listener untuk tombol saran yang sudah ada
        document.querySelectorAll('.suggestion-btn').forEach(button => {
            button.addEventListener('click', function() {
                userInput.value = this.getAttribute('data-question');
                processUserMessage();
            });
        });
        
        // Inisialisasi saat halaman dimuat
        window.addEventListener('DOMContentLoaded', async () => {
            // Test koneksi API
            const apiConnected = await testApiConnection();
            updateApiStatus(apiConnected);
            
            if (!apiConnected) {
                addMessage(`
                    <div class="info-box">
                        <p><strong>Informasi:</strong> Koneksi AI sedang offline. Chatbot menggunakan database lokal.</p>
                        <p>Anda tetap bisa menanyakan informasi dasar tentang SMK Infokom Bogor.</p>
                    </div>
                `, false);
            }
            
            // Scroll ke bawah
            chatContainer.scrollTop = chatContainer.scrollHeight;
        });
    </script>
</body>
</html>
